<execution>
  <constraint>
    ## 连续性检查技术限制
    - **信息完整性约束**：检查质量依赖于可获得信息的完整程度
    - **时间成本约束**：需要在合理时间内完成全面检查
    - **专业知识约束**：历史背景验证需要相应的专业知识支撑
    - **主观判断约束**：某些一致性问题存在主观判断的灰色地带
  </constraint>

  <rule>
    ## 连续性检查强制规则
    - **零容忍原则**：重大一致性错误必须修正，不得妥协
    - **文档化要求**：所有检查结果必须详细记录和分类
    - **交叉验证原则**：重要信息必须通过多个维度验证
    - **版本控制规则**：每次修改后必须重新进行相关检查
  </rule>

  <guideline>
    ## 连续性检查指导原则
    - **系统性优先**：从整体到局部的检查顺序
    - **读者视角**：以普通读者的感知能力为检查标准
    - **优先级管理**：重要问题优先，细节问题次之
    - **预防为主**：建立机制预防一致性问题的产生
  </guideline>

  <process>
    ## 连续性检查标准流程
    
    ### Step 1: 基础档案建立 (30分钟)
    
    ```mermaid
    graph TD
        A[故事分析] --> B[角色档案]
        A --> C[时间线图]
        A --> D[背景资料]
        A --> E[关系网络]
        
        B --> B1[基本信息]
        B --> B2[性格特征]
        B --> B3[能力清单]
        B --> B4[成长轨迹]
        
        C --> C1[主要事件]
        C --> C2[时间节点]
        C --> C3[持续时长]
        C --> C4[并行线索]
        
        D --> D1[历史时期]
        D --> D2[地理环境]
        D --> D3[社会制度]
        D --> D4[文化背景]
        
        E --> E1[人物关系]
        E --> E2[社会关系]
        E --> E3[权力结构]
        E --> E4[利益关联]
    ```
    
    **档案建立清单**：
    - 每个主要角色的详细档案是否完整？
    - 故事时间线是否清晰标注？
    - 历史背景资料是否准确收集？
    
    ### Step 2: 角色一致性检查 (40分钟)
    
    ```mermaid
    mindmap
      root((角色检查))
        性格一致性
          核心特征
          行为模式
          价值观念
          语言风格
        能力一致性
          技能水平
          知识范围
          学习能力
          成长速度
        关系一致性
          态度变化
          互动模式
          权力关系
          情感发展
        发展逻辑性
          变化原因
          转折合理性
          成长轨迹
          前后呼应
    ```
    
    **角色检查工具表**：
    
    | 检查项目 | 检查标准 | 发现问题 | 严重程度 | 修正建议 |
    |---------|---------|---------|---------|----------|
    | 性格特征 | 前后一致 | 记录矛盾 | 高/中/低 | 具体方案 |
    | 能力表现 | 逻辑合理 | 标记异常 | 高/中/低 | 调整建议 |
    | 关系发展 | 自然演进 | 突兀变化 | 高/中/低 | 过渡方案 |
    | 成长轨迹 | 有因有果 | 逻辑跳跃 | 高/中/低 | 补充内容 |
    
    ### Step 3: 时间线一致性检查 (35分钟)
    
    ```mermaid
    gantt
        title 时间线一致性检查流程
        dateFormat  X
        axisFormat %s
        
        section 事件排序
        主线事件    :a1, 0, 10
        支线事件    :a2, 5, 15
        
        section 时间跨度
        短期事件    :b1, 0, 3
        中期发展    :b2, 3, 12
        长期变化    :b3, 12, 20
        
        section 并行验证
        角色A线    :c1, 0, 20
        角色B线    :c2, 2, 18
        环境变化    :c3, 0, 20
    ```
    
    **时间线检查要点**：
    
    ```mermaid
    flowchart TD
        A[时间线检查] --> B[事件顺序验证]
        A --> C[时间跨度合理性]
        A --> D[并行事件同步]
        A --> E[角色年龄匹配]
        
        B --> B1[因果关系]
        B --> B2[逻辑顺序]
        B --> B3[时间标记]
        
        C --> C1[事件持续时间]
        C --> C2[间隔时间]
        C --> C3[总体时间跨度]
        
        D --> D1[多线程同步]
        D --> D2[交叉点验证]
        D --> D3[时间一致性]
        
        E --> E1[年龄增长]
        E --> E2[生理变化]
        E --> E3[经验积累]
    ```
    
    ### Step 4: 历史背景准确性检查 (45分钟)
    
    ```mermaid
    graph LR
        A[历史背景] --> B[时代特征]
        A --> C[地理环境]
        A --> D[社会制度]
        A --> E[文化细节]
        
        B --> B1[政治制度]
        B --> B2[经济水平]
        B --> B3[科技发展]
        B --> B4[社会风貌]
        
        C --> C1[地理位置]
        C --> C2[气候条件]
        C --> C3[自然资源]
        C --> C4[交通条件]
        
        D --> D1[政府结构]
        D --> D2[法律制度]
        D --> D3[社会阶层]
        D --> D4[权力分配]
        
        E --> E1[语言文字]
        E --> E2[宗教信仰]
        E --> E3[生活习俗]
        E --> E4[艺术风格]
    ```
    
    **历史考据检查清单**：
    
    - **政治制度**：政府形式、官职设置、权力结构是否符合历史
    - **社会经济**：经济模式、货币制度、贸易方式是否准确
    - **科技水平**：技术发展程度、工具器械、建筑风格是否合理
    - **文化习俗**：语言表达、礼仪规范、生活方式是否地道
    - **地理环境**：地理位置、气候特征、自然条件是否匹配
    
    ### Step 5: 综合问题分析与修正 (30分钟)
    
    ```mermaid
    flowchart TD
        A[问题汇总] --> B{严重程度分类}
        B -->|严重| C[立即修正]
        B -->|中等| D[计划修正]
        B -->|轻微| E[记录备注]
        
        C --> F[修正方案设计]
        D --> F
        
        F --> G[影响评估]
        G --> H{是否引发新问题}
        H -->|是| I[调整方案]
        H -->|否| J[执行修正]
        
        I --> G
        J --> K[更新档案]
        E --> K
        
        K --> L[质量验证]
    ```
    
    **问题分类标准**：
    
    | 严重程度 | 判断标准 | 处理方式 | 时间要求 |
    |---------|---------|---------|----------|
    | 严重 | 影响故事逻辑 | 立即修正 | 24小时内 |
    | 中等 | 影响阅读体验 | 计划修正 | 1周内 |
    | 轻微 | 细节不完美 | 记录备注 | 下次修订 |
    
    ### Step 6: 质量保证与维护 (20分钟)
    
    ```mermaid
    graph TD
        A[质量保证] --> B[最终检查]
        A --> C[维护机制]
        A --> D[指导原则]
        
        B --> B1[全面复查]
        B --> B2[抽样验证]
        B --> B3[第三方审核]
        
        C --> C1[版本控制]
        C --> C2[变更追踪]
        C --> C3[定期检查]
        
        D --> D1[修改规范]
        D --> D2[检查标准]
        D --> D3[质量要求]
    ```
  </process>

  <criteria>
    ## 连续性质量评价标准

    ### 角色一致性指标
    - ✅ 性格特征一致性：≥95%
    - ✅ 能力表现合理性：≥90%
    - ✅ 关系发展逻辑性：≥90%
    - ✅ 成长轨迹自然度：≥85%

    ### 时间线准确性指标
    - ✅ 事件顺序正确性：≥98%
    - ✅ 时间跨度合理性：≥90%
    - ✅ 并行事件同步性：≥95%
    - ✅ 年龄变化匹配度：≥95%

    ### 历史背景准确性指标
    - ✅ 时代特征符合度：≥90%
    - ✅ 地理环境准确性：≥95%
    - ✅ 社会制度合理性：≥85%
    - ✅ 文化细节地道性：≥80%

    ### 整体质量指标
    - ✅ 重大错误数量：= 0
    - ✅ 中等错误数量：≤ 3个
    - ✅ 轻微错误数量：≤ 10个
    - ✅ 读者满意度：≥ 85%
  </criteria>
</execution>